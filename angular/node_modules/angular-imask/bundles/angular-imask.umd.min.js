!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/forms"),require("@angular/platform-browser"),require("imask"),require("@angular/common")):"function"==typeof define&&define.amd?define("angular-imask",["exports","@angular/core","@angular/forms","@angular/platform-browser","imask","@angular/common"],e):e((t=t||self)["angular-imask"]={},t.ng.core,t.ng.forms,t.ng.platformBrowser,t.IMask,t.ng.common)}(this,(function(t,e,i,n,o,s){"use strict";var r="default"in o?o.default:o;var a={provide:i.NG_VALUE_ACCESSOR,useExisting:e.forwardRef((function(){return p})),multi:!0},u=function(t){return t.nativeElement},p=function(){function t(t,i,o){var s;this._elementRef=t,this._renderer=i,this._compositionMode=o,this.onTouched=function(){},this.onChange=function(){},this.imaskElement=u,this.accept=new e.EventEmitter,this.complete=new e.EventEmitter,this._viewInitialized=!1,this._composing=!1,this._writing=!1,null==this._compositionMode&&(this._compositionMode=(s=n.ɵgetDOM()?n.ɵgetDOM().getUserAgent():"",!/android (\d+)/.test(s.toLowerCase())))}return Object.defineProperty(t.prototype,"element",{get:function(){return this.imaskElement(this._elementRef,this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maskValue",{get:function(){return this.maskRef?"typed"===this.unmask?this.maskRef.typedValue:this.unmask?this.maskRef.unmaskedValue:this.maskRef.value:this.element.value},set:function(t){this.maskRef?"typed"===this.unmask?this.maskRef.typedValue=t:this.unmask?this.maskRef.unmaskedValue=t:this.maskRef.value=t:this._renderer.setProperty(this.element,"value",t)},enumerable:!0,configurable:!0}),t.prototype.ngAfterViewInit=function(){this.imask&&this.initMask(),this._viewInitialized=!0},t.prototype.ngOnChanges=function(t){t.elementRef&&!this.imaskElement&&(this.imaskElement=u),t.imask&&this._viewInitialized&&(this.imask?this.maskRef?this.maskRef.updateOptions(this.imask):(this.initMask(),this.onChange(this.maskValue)):this.destroyMask())},t.prototype.destroyMask=function(){this.maskRef&&(this.maskRef.destroy(),delete this.maskRef)},t.prototype.ngOnDestroy=function(){this.destroyMask(),this.accept.complete(),this.complete.complete()},t.prototype.beginWrite=function(t){this._writing=!0,this._writingValue=t},t.prototype.endWrite=function(){return this._writing=!1,this._writingValue},t.prototype.writeValue=function(t){t=null==t?"":t,this.maskRef?(this.beginWrite(t),(this.maskValue!==t||"string"!=typeof t&&""===this.maskRef.value&&!this.maskRef.el.isActive)&&(this.maskValue=t)):this._renderer.setProperty(this.element,"value",t)},t.prototype._onAccept=function(){var t=this.maskValue;this._writing&&t===this.endWrite()||(this.onChange(t),this.accept.emit(t))},t.prototype._onComplete=function(){this.complete.emit(this.maskValue)},t.prototype.initMask=function(){this.maskRef=r(this.element,this.imask).on("accept",this._onAccept.bind(this)).on("complete",this._onComplete.bind(this))},t.prototype.setDisabledState=function(t){this._renderer.setProperty(this.element,"disabled",t)},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype._handleInput=function(t){this.maskRef||(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)},t.prototype._compositionStart=function(){this._composing=!0},t.prototype._compositionEnd=function(t){this._composing=!1,this._compositionMode&&this._handleInput(t)},t.decorators=[{type:e.Directive,args:[{selector:"[imask]",host:{"(input)":"_handleInput($event.target.value)","(blur)":"onTouched()","(compositionstart)":"_compositionStart()","(compositionend)":"_compositionEnd($event.target.value)"},providers:[a]}]}],t.ctorParameters=function(){return[{type:e.ElementRef},{type:e.Renderer2},{type:Boolean,decorators:[{type:e.Optional},{type:e.Inject,args:[i.COMPOSITION_BUFFER_MODE]}]}]},t.propDecorators={imask:[{type:e.Input}],unmask:[{type:e.Input}],imaskElement:[{type:e.Input}],accept:[{type:e.Output}],complete:[{type:e.Output}]},t}();var m=this&&this.__read||function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,s=i.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(n=s.next()).done;)r.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}return r},h=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(m(arguments[e]));return t},c=function(){function t(){}return t.prototype.transform=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.pipe.apply(void 0,h(t))},t.decorators=[{type:e.Pipe,args:[{name:"imask"}]}],t}(),l=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{imports:[s.CommonModule],declarations:[p,c],exports:[p,c]}]}],t}();Object.defineProperty(t,"PIPE_TYPE",{enumerable:!0,get:function(){return o.PIPE_TYPE}}),Object.defineProperty(t,"pipe",{enumerable:!0,get:function(){return o.pipe}}),t.IMaskDirective=p,t.IMaskModule=l,t.IMaskPipe=c,t.MASKEDINPUT_VALUE_ACCESSOR=a,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=angular-imask.umd.min.js.map